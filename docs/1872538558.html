<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <title>ZRainna的博客-详情</title>
    <link type="text/css" rel="stylesheet" href="./css/base.css" />
    <link type="text/css" rel="stylesheet" href="./css/page.css" />
    <link type="text/css" rel="stylesheet" href="https://cdn.bootcss.com/github-markdown-css/2.10.0/github-markdown.min.css" />
  </head>
  
  <body>
    <div class="m-page">
      <div class="m-box">
        <div class="m-introduce f-flexr">
    <div class="logo"><img src="https://avatars.githubusercontent.com/u/5309877?s=460&v=4"></div>
    <div class="f-ml25 f-flex-1">
        <p class="f-mb10 f-fs26">Zrainna</p>
        <p class="f-fs12 s-fc6">比较懒，什么都没介绍。。。。。</p>
    </div>
</div>
      </div>
      
      <div class="m-box">
        <div class="m-menu f-flexr f-mb40 f-fs16 f-tac">
    <div class="item"><a href="./index.html">首页</a></div>
    <div class="item"><a href="./article.html">文章</a></div>
    <div class="item"><a href="./book.html">书库</a></div>
    <div class="item"><a href="./demo.html">Demo</a></div>
</div>
        
        <div class="markdown-body"><h1>《你不知道的JS》之5作用域闭包</h1><p>《你不知道的JS》上卷 第一部分 作用域和闭包</p>
<h1 id="第五章-作用域闭包">第五章 作用域闭包</h1>
<h2 id="1-闭包定义">1. 闭包定义</h2>
<p>当函数可以记住并访问所在的词法作用域时，就产生闭包了。</p>
<pre><code>function wait(msg){
    setTimeout(function(){
        console.log(msg)
    }, 1000)
}

wait(&#39;closure&#39;)</code></pre>
<h2 id="2-循环和闭包">2. 循环和闭包</h2>
<pre><code>for(var i=0;i&lt;5;i++){
    setTimeout(function(){
        console.log(i)
    },i*1000)
}

// 5 5 5 5 5</code></pre>
<p>使用闭包改造后：</p>
<pre><code>for(var i=0;i&lt;5;i++){
  (function(j){
    setTimeout(function(){
      console.log(j)
    },j*1000)
  })(i)
}

// 输出 0 1 2 3 4 </code></pre>
<p>或者：</p>
<pre><code>for(let i=0;i&lt;5;i++){
    setTimeout(function(){
        console.log(i)
    },i*1000)
}

// 输出 0 1 2 3 4</code></pre>
<p>使用块级作用域来保存变量的值。</p>
<h2 id="3-模块">3. 模块</h2>
<p>模块模式需要具备两个条件：</p>
<ul>
<li>必须有外部的封闭函数，该函数至少要被调用一次。</li>
<li>封闭函数必须返回至少一个内部函数。</li>
</ul>
<pre><code>function a(){
    var name = 11;
    function setName(){
        console.log(name)
    }

    return {
        name, 
        setName
    }
}

var foo = a();
foo.setName();

// 输出11</code></pre>
<p>模块模式的另一个简单用法是命名将要作为公共API返回的对象。</p>
<h2 id="4-小结">4. 小结</h2>
<p>当函数可以记住并访问所在的词法作用域，即使函数在当前词法作用域之外执行，这时就产生了闭包。</p>
</div>
      </div>
    </div>
  </body>
</html>



